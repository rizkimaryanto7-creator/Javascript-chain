<!DOCTYPE html>
<html>
<head>
  <title>JavaScript Blockchain Explorer</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
  <div class="container mt-4">
    <h1 class="text-center">🌐 JavaScript Blockchain Explorer</h1>
    <hr>

    <div class="mb-3">
      <a href="/send" class="btn btn-success">💸 Kirim Transaksi</a>
      <a href="/balance" class="btn btn-info">💰 Cek Saldo</a>
      <a href="/peers" class="btn btn-warning">🌐 Peer Nodes</a>
    </div>

    <h3>Latest Blocks</h3>
    <% chain.slice(-20).reverse().forEach(block => { %>
      <div class="card bg-secondary mb-3">
        <div class="card-body">
          <h5>Block #<%= block.index %></h5>
          <p><strong>Hash:</strong> <%= block.hash %></p>
          <p><strong>Previous:</strong> <%= block.previousHash %></p>
          <p><strong>Timestamp:</strong> <%= new Date(block.timestamp).toLocaleString() %></p>
          <p><strong>Transactions:</strong></p>
          <ul>
            <% block.transactions.forEach(tx => { %>
              <li><%= tx.from %> → <%= tx.to %> : <%= tx.amount %> JAVA</li>
            <% }) %>
          </ul>
          <a href="/block/<%= block.index %>" class="btn btn-sm btn-outline-light">🔍 Detail Blok</a>
        </div>
      </div>
    <% }) %>
  </div>

  <script>
    const ws = new WebSocket('ws://' + location.host);
    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.type === 'newBlock') {
        location.reload(); // Refresh otomatis saat blok baru muncul
      }
    };
  </script>
</body>
</html>
